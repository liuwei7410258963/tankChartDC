(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e9bd"],{"6pyW":function(t,e,a){"use strict";var i=a("ka3J");a.n(i).a},"9ms2":function(t,e,a){"use strict";a.r(e);var i=a("P2sY"),l=a.n(i),s=a("eaIu"),o={name:"TankerDevice",components:{RelationComponent:a("31As").default},data:function(){var t=this;return{addTankerDevice:[],bodyWidth:window.screen.width-13,formLabelWidth:"85px",precisionNum:0,allDisable:!0,deviceArr:[],cameraDeviceConn:[],tankDeviceConn:[],opUnits:[],customProp:[],companyOptions:[],dialogFormVisible:!1,dialogTitle:"添加加油机",form:{id:"",dispenserNo:"",detailInfo:"",status:{value:1},installTime:"",checkTime:"",oilName:""},formRules:{dispenserNo:[{validator:function(e,a,i){""===a||null===a||void 0===a?i("加油机编号不能为空"):Number(a)?t.getByteLen(a)>10?i("加油机编号超过指定长度"):t.validateStationData[e.field]!==a?Object(s.c)({dispenserNo:a}).then(function(t){"fail"===t.info.result?i("加油机编号已存在"):i()}):i():i("加油机编号必须是数字格式")},required:!0,trigger:"change"}],detailInfo:[{validator:function(e,a,i){""===a||null===a||void 0===a?i("加油机名称不能为空"):t.getByteLen(a)>10?i("加油机名称超过指定长度"):t.validateStationData[e.field]!==a?Object(s.c)({detailInfo:a}).then(function(t){"fail"===t.info.result?i("加油机名称已存在"):i()}):i()},required:!0,trigger:"change"}]},editBtnFlag:!1,tankOptions:[],oilName:"",handleFlag:!1,validateStationData:{dispenserNo:"",detailInfo:""}}},computed:{},created:function(){this.getAllTankerList()},methods:{getAllTankerList:function(){var t=this;Object(s.e)().then(function(e){t.addTankerDevice=e,e.forEach(function(t){t.relNozListsStr=t.relNozLists.join(","),null===t.status&&(t.status={value:""})})})},editTankBtn:function(t){var e=this;this.handleFlag=!0,this.dialogTitle="编辑加油机",this.dialogFormVisible=!0,this.$nextTick(function(){void 0!==e.$refs.valObj&&(e.form.status={value:t.status.value},e.$refs.valObj.resetFields(),e.form=l()({},t),e.validateStationData.dispenserNo=t.dispenserNo,e.validateStationData.detailInfo=t.detailInfo)})},addTanker:function(){var t=this;this.handleFlag=!1,this.dialogTitle="添加加油机",this.$nextTick(function(){void 0!==t.$refs.valObj&&(t.$refs.valObj.resetFields(),t.form.oilName="",t.form.status={value:1})}),this.validateStationData.dispenserNo="",this.validateStationData.detailInfo="",this.dialogFormVisible=!0},cancel:function(){this.getAllTankerList(),this.dialogFormVisible=!1},submit:function(){var t=this;this.$refs.valObj.validate(function(e){if(!e)return!1;var a=l()({},t.form);a.status=1===t.form.status.value?"ENABLE":"DISABLE",a.deviceType="DISPENSER",t.handleFlag?Object(s.b)(a).then(function(e){"success"===e.info.result&&(t.$message({message:"修改成功",type:"success"}),t.getAllTankerList(),t.dialogFormVisible=!1)}):Object(s.a)(a).then(function(e){"success"===e.info.result&&(t.$message({message:"修改成功",type:"success"}),t.continueTip())})})},continueTip:function(){var t=this;this.$confirm("添加成功, 是否继续添加?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"success"}).then(function(){t.getAllTankerList(),t.form.status={value:1},t.$refs.valObj.resetFields()}).catch(function(){t.getAllTankerList(),t.dialogFormVisible=!1})},getByteLen:function(t){return(t+="").replace(/[\u4E00-\uFFE5]/g,"aa").length},goRelationshipComponent:function(t){this.$refs.relation.gunTankRelationship(t,"tanker","look")}}},n=(a("6pyW"),a("KHd+")),r=Object(n.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.addTanker}},[t._v("\n    添加\n  ")]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("el-row",{style:"margin-bottom: 20px;width:"+t.bodyWidth+"px",attrs:{gutter:10}},t._l(t.addTankerDevice,function(e,i){return a("el-col",{key:i,staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(e.dispenserNo)+"号加油机")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){t.goRelationshipComponent(e.dispenserNo)}}},[t._v("\n            枪机关系\n          ")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 15px"},attrs:{type:"text"},on:{click:function(a){t.editTankBtn(e)}}},[t._v("\n            编辑\n          ")])],1),t._v(" "),a("el-form",[t._e(),t._v(" "),a("el-row",[a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:t.$t("oil.code")}},[a("el-input",{staticStyle:{width:"135px"},attrs:{readonly:"",size:"small"},model:{value:e.dispenserNo,callback:function(a){t.$set(e,"dispenserNo","string"==typeof a?a.trim():a)},expression:"item.dispenserNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:"名称"}},[a("el-input",{staticStyle:{width:"135px"},attrs:{readonly:"",size:"small"},model:{value:e.detailInfo,callback:function(a){t.$set(e,"detailInfo","string"==typeof a?a.trim():a)},expression:"item.detailInfo"}})],1)],1),t._v(" "),a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:"关联油枪"}},[a("el-input",{staticStyle:{width:"135px"},attrs:{readonly:"",size:"small"},model:{value:e.relNozListsStr,callback:function(a){t.$set(e,"relNozListsStr",a)},expression:"item.relNozListsStr"}})],1)],1),t._v(" "),a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty radioSty",attrs:{"label-width":t.formLabelWidth,label:t.$t("distribution_warn.status")}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.status.value,callback:function(a){t.$set(e.status,"value",a)},expression:"item.status.value"}},[a("el-radio",{attrs:{label:1,size:"small"}},[t._v("\n                    "+t._s(t.$t("table.able"))+"\n                  ")]),t._v(" "),a("el-radio",{attrs:{label:0,size:"small"}},[t._v("\n                    "+t._s(t.$t("table.disable"))+"\n                  ")])],1)],1)],1)],1)],1)],1)],1)})),t._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:t.dialogFormVisible,title:t.dialogTitle,width:"951px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.cancel}},[a("el-form",{ref:"valObj",attrs:{model:t.form,rules:t.formRules}},[t._e(),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:t.$t("oil.code"),prop:"dispenserNo"}},[a("el-input",{staticStyle:{width:"135px"},attrs:{disabled:t.handleFlag,size:"small"},model:{value:t.form.dispenserNo,callback:function(e){t.$set(t.form,"dispenserNo","string"==typeof e?e.trim():e)},expression:"form.dispenserNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:"名称",prop:"detailInfo"}},[a("el-input",{staticStyle:{width:"135px"},attrs:{size:"small"},model:{value:t.form.detailInfo,callback:function(e){t.$set(t.form,"detailInfo","string"==typeof e?e.trim():e)},expression:"form.detailInfo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"inputSty radioSty",attrs:{"label-width":t.formLabelWidth,label:t.$t("distribution_warn.status"),prop:"status.value"}},[a("el-radio-group",{model:{value:t.form.status.value,callback:function(e){t.$set(t.form.status,"value",e)},expression:"form.status.value"}},[a("el-radio",{attrs:{label:1,size:"small"}},[t._v("\n                "+t._s(t.$t("table.able"))+"\n              ")]),t._v(" "),a("el-radio",{attrs:{label:0,size:"small"}},[t._v("\n                "+t._s(t.$t("table.disable"))+"\n              ")])],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("relation-component",{ref:"relation"})],1)},[],!1,null,"fe7860d6",null);r.options.__file="tanker_device.vue";e.default=r.exports},ka3J:function(t,e,a){}}]);
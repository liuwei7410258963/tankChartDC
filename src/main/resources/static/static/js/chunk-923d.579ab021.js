(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-923d"],{E458:function(e,t,a){"use strict";var l=a("vXrV");a.n(l).a},IAxT:function(e,t,a){"use strict";var l=a("stDE");a.n(l).a},JjGQ:function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"c",function(){return n}),a.d(t,"a",function(){return o}),a.d(t,"b",function(){return s});var l=a("t3Un");function i(e){return Object(l.a)({url:"/oil/list",method:"get",params:e})}function n(e){return Object(l.a)({url:"/oil/exist",method:"post",data:e})}function o(e){return Object(l.a)({url:"/oil/add",method:"post",data:e})}function s(e){return Object(l.a)({url:"/oil/update",method:"post",data:e})}},bzVn:function(e,t,a){"use strict";a.r(t);var l=a("gDS+"),i=a.n(l),n=a("P2sY"),o=a.n(n),s=a("7Qib"),r=a("hffR"),c=a("XINx"),d=a("JjGQ"),u={name:"Oil",directives:{elDragDialog:c.a},components:{handleTable:r.a},data:function(){var e=this;return{code:"",fullName:"",oilTypeData:[],height:window.screen.height>768?.7*document.body.clientHeight:.6*document.body.clientHeight,listLoading:!1,tableHeader:this.getHeader(),tableOption:{border:!0,height:.6*window.screen.height},updateCheck:(Object(s.e)("oiltype_checked").replace(/\"/g,"")||this.getChecked().toString()).split(","),updateHeader:Object(s.f)("oiltype",this.getHeader())||this.getHeader(),listQuery:{pageNum:1,pageRow:window.screen.height>768?20:15},total:0,pageSize:window.screen.height>768?[20,40,60,100]:[15,30,50,100],dialogValObjVisible:!1,formLabelWidth:"90px",valObj:{id:"",fullName:"",shortName:"",code:"",density:"",status:{value:1,desc:"启用"},type:{value:3,desc:this.$t("oil.other")},color:"#000"},dialogValObjName:"编辑油品",addOrEdit:!1,predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"],oilData:[{id:1,name:this.$t("oil.gas")},{id:2,name:this.$t("oil.diesel")},{id:3,name:this.$t("oil.other")}],rules:{fullName:[{validator:function(t,a,l){""===a||null===a?l("油品名称不能为空"):e.getByteLen(a)>200?l("油品名称超过指定长度"):e.validateFullName[t.field]!==a?Object(d.c)({fullName:a}).then(function(e){!1===e?l("油品名称已存在"):l()}):l()},required:!0,trigger:"change"}],shortName:[{validator:function(t,a,l){""===a||null===a?l("油品简称不能为空"):e.getByteLen(a)>12?l("油品简称超过指定长度"):e.validateFullName[t.field]!==a?Object(d.c)({shortName:a}).then(function(e){!1===e?l("油品简称已存在"):l()}):l()},required:!0,trigger:"change"}],code:[{validator:function(t,a,l){""===a||null===a?l("油品编码不能为空"):e.getByteLen(a)>12?l("油品编码超过指定长度"):e.validateFullName[t.field]!==a?Object(d.c)({code:a}).then(function(e){!1===e?l("油品编码已存在"):l()}):l()},required:!0,trigger:"change"}],"status.value":[{message:this.$t("oil.choose_status"),required:!0,trigger:"change"}],"type.value":[{message:this.$t("oil.choose_type"),required:!0,trigger:"change"}]},validateFullName:{fullName:"",shortName:"",code:""}}},created:function(){this.getAllOilList()},methods:{handleSizeChange:function(e){this.listQuery.pageRow=e,this.listQuery.pageNum=1,this.getAllOilList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getAllOilList()},getAllOilList:function(){var e=this;this.listLoading=!0,this.listQuery.code=""===this.code?null:this.code,this.listQuery.fullName=""===this.fullName?null:this.fullName,Object(d.d)(this.listQuery).then(function(t){e.oilTypeData=t.list,e.total=t.totalCount,e.listLoading=!1})},getHeader:function(){return[{prop:"code",label:"油品编码"},{prop:"fullName",label:this.$t("oil.oil_name")},{prop:"shortName",label:this.$t("oil.oil_short_name")},{prop:"type.desc",label:this.$t("oil.type")}]},getChecked:function(){var e=[];for(var t in this.getHeader())e.push(this.getHeader()[t].label);return e},handleAddClick:function(){var e=this;this.addOrEdit=!0,this.dialogValObjName=this.$t("oil.add"),this.$nextTick(function(){void 0!==e.$refs.valObj&&(e.$refs.valObj.resetFields(),e.valObj.status={value:1},e.valObj.type={value:3},e.valObj.color="#000",e.validateFullName.fullName="",e.validateFullName.shortName="",e.validateFullName.code="")}),this.dialogValObjVisible=!0},handleEditClick:function(e){var t=this;this.addOrEdit=!1,this.dialogValObjName=this.$t("oil.edit"),this.dialogValObjVisible=!0,this.$nextTick(function(){void 0!==t.$refs.valObj&&(t.$refs.valObj.resetFields(),t.valObj=o()({},e),t.valObj.status={value:e.status?e.status.value:1},t.valObj.type={value:e.type?e.type.value:3},t.validateFullName.fullName=e.fullName,t.validateFullName.shortName=e.shortName,t.validateFullName.code=e.code)})},cancel:function(){this.getAllOilList(),this.dialogValObjVisible=!1},headleChangeColor:function(e){this.valObj.color=e},statusChange:function(e){var t=this,a={id:e.id,status:0===e.status.value?1:0};Object(d.b)(a).then(function(a){0===e.deleted?t.$message({message:t.$t("table.changeOpen"),type:"success"}):t.$message({message:t.$t("table.changeClose"),type:"success"}),t.getAllOilList()})},sureDiaglogOperate:function(e){var t=this;this.$refs.valObj.validate(function(a){if(a){var l="";e.type&&1===e.type.value?l="GASOLINE":e.type&&2===e.type.value?l="DIESEL":e.type&&3===e.type.value&&(l="OTHER");var i={fullName:t.valObj.fullName,shortName:t.valObj.shortName,code:t.valObj.code,density:t.valObj.density,status:1===t.valObj.status.value?"ENABLE":"DISABLE",color:t.valObj.color,type:l};!0===t.addOrEdit?Object(d.a)(i).then(function(e){e?(t.$message({message:t.$t("company.add_success"),type:"success"}),t.continueTip()):t.$message({message:t.$t("company.add_fail"),type:"error"})}):(i.id=t.valObj.id,Object(d.b)(i).then(function(e){e?t.$message({message:t.$t("company.edit_success"),type:"success"}):t.$message({message:t.$t("company.edit_fail"),type:"error"}),t.getAllOilList(),t.dialogValObjVisible=!1}))}})},continueTip:function(){var e=this;this.$confirm("添加成功, 是否继续添加?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"success"}).then(function(){e.getAllOilList(),e.valObj.status={value:1},e.$refs.valObj.resetFields()}).catch(function(){e.getAllOilList(),e.dialogValObjVisible=!1})},exportData:function(){var e={jsonObject:i()(this.listQuery),fileName:this.$t("oil.name")+".xlsx"};Object(s.c)("oil/export",e,this.getHeader())},getByteLen:function(e){return(e+="").replace(/[\u4E00-\uFFE5]/g,"aa").length}}},h=(a("E458"),a("KHd+")),f=Object(h.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("div",{attrs:{id:"top"}},[a("el-row",[a("el-col",{attrs:{lg:5,xl:4}},[a("span",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("\n          油品编码:\n        ")]),e._v(" "),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"180px"},attrs:{clearable:"",size:"small"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("el-col",{attrs:{lg:5,xl:4}},[a("span",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("\n          油品名称:\n        ")]),e._v(" "),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"180px"},attrs:{clearable:"",size:"small"},model:{value:e.fullName,callback:function(t){e.fullName=t},expression:"fullName"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{"margin-left":"3px"},attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:function(t){e.listQuery.pageNum=1,e.getAllOilList()}}},[e._v("\n          "+e._s(e.$t("table.search"))+"\n        ")])],1),e._v(" "),a("div",{staticStyle:{float:"right","margin-bottom":"10px"}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddClick}},[e._v("\n          "+e._s(e.$t("table.add"))+"\n        ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          "+e._s(e.$t("table.export"))+"\n        ")])],1)],1)],1),e._v(" "),a("handleTable",{ref:"oiltype",staticClass:"out-table",attrs:{loading:e.listLoading,data:e.oilTypeData,header:e.tableHeader,option:e.tableOption,height:e.height,defaultcheck:e.updateCheck,defaulheader:e.updateHeader,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{slot:"handled",label:e.$t("oil.color"),align:"center","min-width":"50px"},slot:"handled",scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{staticClass:"colorSty",style:{background:e.row.color}})]}}])}),e._v(" "),a("el-table-column",{attrs:{slot:"handled",label:e.$t("table.actions"),align:"center","min-width":"150px"},slot:"handled",scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){e.handleEditClick(t.row)}}},[e._v("\n          "+e._s(e.$t("table.edit"))+"\n        ")]),e._v(" "),1===t.row.status.value?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.statusChange(t.row,0)}}},[e._v("\n          "+e._s(e.$t("table.open"))+"\n        ")]):a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.statusChange(t.row,1)}}},[e._v("\n          "+e._s(e.$t("table.close"))+"\n        ")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageRow,total:e.total,"page-sizes":e.pageSize,layout:" total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"diaSty",attrs:{visible:e.dialogValObjVisible,title:e.dialogValObjName,width:"980px"},on:{"update:visible":function(t){e.dialogValObjVisible=t},close:e.cancel}},[a("el-form",{ref:"valObj",attrs:{model:e.valObj,rules:e.rules}},[e._e(),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:e.$t("oil.oil_name"),prop:"fullName"}},[a("el-input",{model:{value:e.valObj.fullName,callback:function(t){e.$set(e.valObj,"fullName","string"==typeof t?t.trim():t)},expression:"valObj.fullName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:e.$t("oil.oil_short_name"),prop:"shortName"}},[a("el-input",{model:{value:e.valObj.shortName,callback:function(t){e.$set(e.valObj,"shortName","string"==typeof t?t.trim():t)},expression:"valObj.shortName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"油品编码",prop:"code"}},[a("el-input",{model:{value:e.valObj.code,callback:function(t){e.$set(e.valObj,"code","string"==typeof t?t.trim():t)},expression:"valObj.code"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:e.$t("table.status"),prop:"status.value"}},[a("el-radio-group",{staticClass:"radioStyle",model:{value:e.valObj.status.value,callback:function(t){e.$set(e.valObj.status,"value",t)},expression:"valObj.status.value"}},[a("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("table.able")))]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("table.disable")))])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:e.$t("oil.type"),prop:"type.value"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("company.choose")},model:{value:e.valObj.type.value,callback:function(t){e.$set(e.valObj.type,"value",t)},expression:"valObj.type.value"}},e._l(e.oilData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:e.$t("oil.self_color"),prop:"color"}},[a("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":!1},on:{change:e.headleChangeColor},model:{value:e.valObj.color,callback:function(t){e.$set(e.valObj,"color",t)},expression:"valObj.color"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("\n        "+e._s(e.$t("table.cancel"))+"\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sureDiaglogOperate(e.valObj)}}},[e._v("\n        "+e._s(e.$t("table.confirm"))+"\n      ")])],1)],1)],1)},[],!1,null,"d1d50e38",null);f.options.__file="oil.vue";t.default=f.exports},hffR:function(e,t,a){"use strict";var l=a("gDS+"),i=a.n(l),n={props:{data:{default:function(){return[]},type:Array},header:{default:function(){return[]},type:Array},option:{default:function(){return{}},type:Object},defaultcheck:{default:function(){return[]},type:Array},defaulheader:{default:function(){return[]},type:Array},vuename:{default:function(){return""},type:String},callback:{type:Function,default:null},loading:{type:Boolean,default:!1},height:{default:function(){return window.screen.height>768?.595*window.screen.height:.64*window.screen.height},type:Number}},data:function(){return{tableHeader:this.header,dragState:{start:-9,end:-9,dragging:!1,direction:void 0},checkboxVal:this.defaultcheck,formThead:this.defaulheader,check_width:this.header.length>20?400:220}},watch:{checkboxVal:function(e,t){this.formThead=this.tableHeader.filter(function(t){return e.indexOf(t.label)>=0}),this.setCookie(this.vuename,i()(this.formThead)),this.setCookie(this.vuename+"_checked",'"'+e.toString()+'"'),this.key=this.key+1}},methods:{callbackClassName:function(e){var t=e.row,a=e.rowIndex;if(this.callback)return this.callback({row:t,rowIndex:a})},findHidden:function(){this.defaulheader.forEach(function(e){})},handleSelectionChange:function(e){this.$emit("onHandleSelectionChange",e)},rowClick:function(e,t,a){if(a&&"selection"!==a.type&&"operation"!==a.columnKey&&"expand"!==a.type){var l={row:e,event:t,column:a};this.$emit("onRowClick",l)}},renderHeader:function(e,t){var a=this,l=t.column;return e("div",{class:["thead-cell"],on:{mousedown:function(e){a.handleMouseDown(e,l)},mousemove:function(e){a.handleMouseMove(e,l)}}},[e("a",l.label),e("span",{class:["virtual"]})])},handleMouseDown:function(e,t){this.dragState.dragging=!0,this.dragState.start=parseInt(t.columnKey),document.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(){this.dragColumn(this.dragState),this.dragState={start:-9,end:-9,dragging:!1,direction:void 0},document.removeEventListener("mouseup",this.handleMouseUp)},handleMouseMove:function(e,t){if(!this.dragState.dragging)return!1;var a=parseInt(t.columnKey);a-this.dragState.start!=0?(this.dragState.direction=a-this.dragState.start<0?"left":"right",this.dragState.end=parseInt(t.columnKey)):this.dragState.direction=void 0},dragColumn:function(e){for(var t=e.start,a=e.end,l=[],n="left"===e.direction,o=n?a:t-1,s=n?t+1:a,r=0;r<this.formThead.length;r++)r===a?l.push(this.formThead[t]):r>o&&r<s?l.push(this.formThead[n?r-1:r+1]):l.push(this.formThead[r]);this.formThead=l,this.setCookie(this.vuename,i()(this.formThead))},headerCellClassName:function(e){e.column;var t=e.columnIndex;return(t===this.dragState.end?"darg_active_"+this.dragState.direction:"")+" "+(t===this.dragState.start?"darg_start":"")},cellClassName:function(e){e.column;return e.columnIndex===this.dragState.start?"darg_start":""},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;this.$emit("tableRowClassName",{row:t,rowIndex:a})},setCookie:function(e,t){document.cookie=e+"="+t+"; "}}},o=(a("IAxT"),a("KHd+")),s=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-table",class:{"w-table_moving":e.dragState.dragging}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:{width:parseInt(e.option.width)+"px"},attrs:{data:e.data,border:e.option.border,height:e.height,"max-height":e.option.maxHeight,"cell-class-name":e.cellClassName,"row-class-name":e.callbackClassName,"header-cell-class-name":e.headerCellClassName,"highlight-current-row":"",stripe:""},on:{"selection-change":e.handleSelectionChange,"row-click":e.rowClick}},[e._t("fixed"),e._v(" "),e._l(e.formThead,function(t,l){return a("el-table-column",{key:l,attrs:{prop:t.prop,label:e.$t(t.label),width:t.width,"min-width":t.minWidth,type:t.type,fixed:t.fixed,formatter:t.formatter,"header-align":t.headerAlign,"column-key":l.toString(),"render-header":e.renderHeader,align:"center","show-overflow-tooltip":""}})}),e._v(" "),e._t("handled")],2)],1)},[],!1,null,null,null);s.options.__file="handleTable.vue";t.a=s.exports},stDE:function(e,t,a){},vXrV:function(e,t,a){}}]);
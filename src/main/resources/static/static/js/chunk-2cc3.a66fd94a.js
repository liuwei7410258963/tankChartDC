(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2cc3"],{D66H:function(t,e,a){},Vt1q:function(t,e,a){"use strict";a.d(e,"f",function(){return n}),a.d(e,"e",function(){return l}),a.d(e,"a",function(){return s}),a.d(e,"b",function(){return o}),a.d(e,"c",function(){return r}),a.d(e,"g",function(){return c}),a.d(e,"d",function(){return d}),a.d(e,"i",function(){return u}),a.d(e,"h",function(){return f});var i=a("t3Un");function n(t){return Object(i.a)({url:"/device/tank/list",method:"get",params:t})}function l(t){return Object(i.a)({url:"/device/tank/query",method:"get",params:t})}function s(t){return Object(i.a)({url:"/device/tank/add",method:"post",data:t})}function o(t){return Object(i.a)({url:"/device/tank/update",method:"post",data:t})}function r(t){return Object(i.a)({url:"/device/tank/exist",method:"post",data:t})}function c(t){return Object(i.a)({url:"/volumeTable/get",method:"get",params:t})}function d(t){return Object(i.a)({url:"/device/nozreltank/list",method:"get",params:t})}function u(t){return Object(i.a)({url:"/device/nozreltank/update",method:"post",data:t})}function f(t){return Object(i.a)({url:"/device/nozreltank/cancel",method:"post",data:t})}},Xmhh:function(t,e,a){"use strict";var i=a("D66H");a.n(i).a},eaIu:function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"a",function(){return l}),a.d(e,"b",function(){return s}),a.d(e,"c",function(){return o}),a.d(e,"d",function(){return r}),a.d(e,"g",function(){return c}),a.d(e,"f",function(){return d});var i=a("t3Un");function n(t){return Object(i.a)({url:"/device/dispenser/list",method:"get",params:t})}function l(t){return Object(i.a)({url:"/device/dispenser/add",method:"post",data:t})}function s(t){return Object(i.a)({url:"/device/dispenser/update",method:"post",data:t})}function o(t){return Object(i.a)({url:"/device/dispenser/exist",method:"post",data:t})}function r(t){return Object(i.a)({url:"/device/nozdisrel/list",method:"get",params:t})}function c(t){return Object(i.a)({url:"/device/nozdisrel/update",method:"post",data:t})}function d(t){return Object(i.a)({url:"/device/nozdisrel/cancel",method:"post",data:t})}},zYLz:function(t,e,a){"use strict";a.r(e);var i=a("P2sY"),n=a.n(i),l=a("eaIu"),s=a("Vt1q"),o={name:"TankerDevice",data:function(){var t=this,e=function(e,a,i){""===a||null===a||void 0===a?"dispenserNo"===e.field?i("加油机编号不能为空"):"detailInfo"===e.field?i("加油机名称不能为空"):i():t.getByteLen(a)>10?"dispenserNo"===e.field?i("加油机编号不能大于10字节"):"detailInfo"===e.field?i("加油机名称不能大于10字节"):i():t.validateStationData[e.field]!==a?"dispenserNo"===e.field?Object(l.c)({dispenserNo:a}).then(function(t){"fail"===t.info.result?i("加油机编号已存在"):i()}):"detailInfo"===e.field&&Object(l.c)({detailInfo:a}).then(function(t){"fail"===t.info.result?i("加油机名称已存在"):i()}):i()};return{addTankerDevice:[],formLabelWidth:"85px",precisionNum:0,allDisable:!0,deviceArr:[],cameraDeviceConn:[],tankDeviceConn:[],opUnits:[],customProp:[],companyOptions:[],dialogFormVisible:!1,dialogTitle:"添加加油机",form:{id:"",dispenserNo:"",productType:"",tankNos:"",status:{value:1},installTime:"",checkTime:"",maintenanceManagerId:"",oilName:""},formRules:{dispenserNo:[{validator:e,required:!0,trigger:"blur"}],detailInfo:[{validator:e,required:!0,trigger:"blur"}]},editBtnFlag:!1,tankOptions:[],oilName:"",handleFlag:!1,validateStationData:{dispenserNo:"",detailInfo:""}}},computed:{},created:function(){this.getAllTankList()},methods:{getOption:function(t){this.companyOptions=t},getAllTankList:function(){var t=this;Object(s.f)().then(function(e){e.forEach(function(e){t.tankOptions.push({tankNos:e.tankNo,tankName:e.detailInfo,oilName:e.oilName})}),t.getAllTankerList()})},getAllTankerList:function(){var t=this;Object(l.e)().then(function(e){t.addTankerDevice=e.list;for(var a=function(e){var a=t.addTankerDevice[e].tankNos.split(",");t.addTankerDevice[e].tankNos=[],t.addTankerDevice[e].oilName="",a.forEach(function(a){t.addTankerDevice[e].tankNos.push(parseInt(a)),t.tankOptions.forEach(function(i){parseInt(i.tankNos)===parseInt(a)&&(t.addTankerDevice[e].oilName+=i.oilName+",")})}),null===t.addTankerDevice[e].status&&(t.addTankerDevice[e].status={value:""})},i=0;i<t.addTankerDevice.length;i++)a(i)})},getOilName:function(t){var e=this;this.tankOptions.forEach(function(a){e.form.oilName="",t.forEach(function(t){e.tankOptions.forEach(function(a){a.tankNos===t&&(e.form.oilName+=a.oilName+",")})})})},editTankBtn:function(t){var e=this;this.handleFlag=!0,this.dialogTitle="编辑加油机",this.dialogFormVisible=!0,this.$nextTick(function(){void 0!==e.$refs.valObj&&(e.form.status={value:t.status.value},e.$refs.valObj.resetFields(),e.form=n()({},t),e.validateStationData.dispenserNo=t.dispenserNo,e.validateStationData.detailInfo=t.detailInfo)})},addTanker:function(){var t=this;this.handleFlag=!1,this.dialogTitle="添加加油机",this.$nextTick(function(){void 0!==t.$refs.valObj&&(t.form.oilName="",t.form.status={value:1},t.$refs.valObj.resetFields())}),this.validateStationData.dispenserNo="",this.validateStationData.detailInfo="",this.dialogFormVisible=!0},submit:function(){var t=this;this.form.deviceType="DISPENSER",this.form.tankNos=this.form.tankNos.join(","),this.$refs.valObj.validate(function(e){if(!e)return!1;1===t.form.status.value?t.form.status="ENABLE":0===t.form.status.value&&(t.form.status="DISABLE"),t.handleFlag?Object(l.b)(t.form).then(function(e){"success"===e.info.result&&(t.$message({message:"修改成功",type:"success"}),t.getAllTankerList(),t.dialogFormVisible=!1)}):Object(l.a)(t.form).then(function(e){"success"===e.info.result&&(t.$message({message:"修改成功",type:"success"}),t.continueTip())})})},continueTip:function(){var t=this;this.$confirm("添加成功, 是否继续添加?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"success"}).then(function(){t.getAllTankerList(),t.form.status={value:1}}).catch(function(){t.getAllTankerList(),t.dialogFormVisible=!1})},getByteLen:function(t){return(t+="").replace(/[\u4E00-\uFFE5]/g,"aa").length}}},r=(a("Xmhh"),a("KHd+")),c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.addTanker}},[t._v("\n    添加\n  ")]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:10}},t._l(t.addTankerDevice,function(e,i){return a("el-col",{key:i,staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(e.dispenserNo)+"号加油机")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){t.editTankBtn(e)}}},[t._v("\n            编辑\n          ")])],1),t._v(" "),a("el-form",[t._e(),t._v(" "),a("el-row",[a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:t.$t("oil.code")}},[a("el-input",{staticStyle:{width:"135px"},attrs:{readonly:"",size:"small"},model:{value:e.dispenserNo,callback:function(a){t.$set(e,"dispenserNo","string"==typeof a?a.trim():a)},expression:"item.dispenserNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:"名称"}},[a("el-input",{staticStyle:{width:"135px"},attrs:{readonly:"",size:"small"},model:{value:e.detailInfo,callback:function(a){t.$set(e,"detailInfo","string"==typeof a?a.trim():a)},expression:"item.detailInfo"}})],1)],1),t._v(" "),a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty",attrs:{label:"关联油罐","label-width":"85px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small",multiple:""},on:{change:t.getOilName},model:{value:e.tankNos,callback:function(a){t.$set(e,"tankNos",a)},expression:"item.tankNos"}},t._l(t.tankOptions,function(t){return a("el-option",{key:t.tankNos,attrs:{label:t.tankName,value:t.tankNos}})}))],1)],1),t._v(" "),a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:"油品"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"",size:"small"},model:{value:e.oilName,callback:function(a){t.$set(e,"oilName",a)},expression:"item.oilName"}})],1)],1),t._v(" "),a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{staticClass:"inputSty radioSty",attrs:{"label-width":t.formLabelWidth,label:t.$t("distribution_warn.status")}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.status.value,callback:function(a){t.$set(e.status,"value",a)},expression:"item.status.value"}},[a("el-radio",{attrs:{label:1,size:"small"}},[t._v("\n                    "+t._s(t.$t("table.able"))+"\n                  ")]),t._v(" "),a("el-radio",{attrs:{label:0,size:"small"}},[t._v("\n                    "+t._s(t.$t("table.disable"))+"\n                  ")])],1)],1)],1)],1)],1)],1)],1)})),t._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:t.dialogFormVisible,title:t.dialogTitle,width:"951px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"valObj",attrs:{model:t.form,rules:t.formRules}},[t._e(),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:t.$t("oil.code"),prop:"dispenserNo"}},[a("el-input",{staticStyle:{width:"135px"},attrs:{size:"small"},model:{value:t.form.dispenserNo,callback:function(e){t.$set(t.form,"dispenserNo","string"==typeof e?e.trim():e)},expression:"form.dispenserNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:"名称",prop:"detailInfo"}},[a("el-input",{staticStyle:{width:"135px"},attrs:{size:"small"},model:{value:t.form.detailInfo,callback:function(e){t.$set(t.form,"detailInfo","string"==typeof e?e.trim():e)},expression:"form.detailInfo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"inputSty",attrs:{label:"关联油罐","label-width":"85px",prop:"tankNos"}},[a("el-select",{staticStyle:{width:"135px"},attrs:{size:"small",multiple:"","collapse-tags":""},on:{change:t.getOilName},model:{value:t.form.tankNos,callback:function(e){t.$set(t.form,"tankNos",e)},expression:"form.tankNos"}},t._l(t.tankOptions,function(t){return a("el-option",{key:t.tankNos,attrs:{label:t.tankName,value:t.tankNos}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"inputSty",attrs:{"label-width":t.formLabelWidth,label:"油品"}},[a("el-input",{staticStyle:{width:"135px"},attrs:{readonly:"",size:"small"},model:{value:t.form.oilName,callback:function(e){t.$set(t.form,"oilName",e)},expression:"form.oilName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"inputSty radioSty",attrs:{"label-width":t.formLabelWidth,label:t.$t("distribution_warn.status"),prop:"status.value"}},[a("el-radio-group",{model:{value:t.form.status.value,callback:function(e){t.$set(t.form.status,"value",e)},expression:"form.status.value"}},[a("el-radio",{attrs:{label:1,size:"small"}},[t._v("\n                "+t._s(t.$t("table.able"))+"\n              ")]),t._v(" "),a("el-radio",{attrs:{label:0,size:"small"}},[t._v("\n                "+t._s(t.$t("table.disable"))+"\n              ")])],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"bd9d248c",null);c.options.__file="tanker_device.vue";e.default=c.exports}}]);